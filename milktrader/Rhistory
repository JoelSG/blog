require(milk)
getSymbols('GLD', from='1900-01-01')
getSymbols('^GSPC', from=first(index(GLD)))
GSCP$RET = dailyReturn(Cl(GSPC))
G = GSPC[GSPC$RET > .018]
GLD$RET = dailyReturn(Cl(GLD))
GLD$next.day = lag(GLD$RET, k=-1)
gld = GLD[index(G)]
g = gld[-(nrow(gld)-1),]
png('goldWhenSPXRallies.png')
zeroplot(g$next.day, up.col='purple', dn.col='purple4', main='GLD', xlab='from 2005 to present')
