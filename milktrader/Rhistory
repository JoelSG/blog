require(milk)
require(PortfolioAnalytics)
getSymbols('^NDX', from='1900-01-01')
NDX$RET = dailyReturn(Cl(NDX))
NDX$twelve = rollapply(NDX$RET, 12, Return.cumulative)
NDX$next12 = lag( NDX$twelve, k=-12)
N = NDX[NDX$twelve > .06]
n = N[.indexmon(N) == 7]
png('twelvedayrallyndx.png')
zeroplot(n$next12, up.col='yellow', dn.col='yellow4', main='NDX', xlab='1986 to present')
